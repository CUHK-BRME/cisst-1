/*
  
  Author(s):  Min Yang Jung
  Created on: 2014-07-25
  
  (C) Copyright 2014 Johns Hopkins University (JHU), All Rights
  Reserved.

--- begin cisst license - do not edit ---

This software is provided "as is" under an open source license, with
no warranty.  The complete license can be found in license.txt and
http://www.cisst.org/cisst/license.txt.

--- end cisst license ---
*/

//
// This file defines a set of cisst-specific framework events and filters for casros.
// All task-type cisst components in the system will have events and filters that
// this file defines.
// The names of target components are null because they will be replaced by casros later 
// with actual names when casros processes this file.
//
{
    "component": "", // will be set by casros when deployed
    "event": [
        // Periodic thread overrun
        {   "name"            : "EVT_THREAD_OVERRUN",
            "severity"        : 201,
            "state_transition": [ "N2W" ]
        },
        {   "name"            : "/EVT_THREAD_OVERRUN",
            "severity"        : 201,
            "state_transition": [ "W2N" ]
        },
        // Internal queue full (for provided interface states)
        {   "name"            : "EVT_COMMAND_QUEUE_FULL",
            "severity"        : 201,
            "state_transition": [ "N2E" ]
        },
        {   "name"            : "/EVT_COMMAND_QUEUE_FULL",
            "severity"        : 201,
            "state_transition": [ "E2N" ]
        }
    ],
    "filter": [
        // Filter to detect periodic thread overrun
        {   "class_name"       : "FilterThreshold",
            "target"           : {
                "type"         : "s_F",
                "component"    : ""  // "component" defined above is used instead
            },
            "type"             : "ACTIVE",
            "argument" : {
                "input_signal" : "",  // set by casros when deployed
                "threshold"    : 0.0, // set by casros when deployed
                "tolerance"    : 0.0, // up to this % of overrun from nominal period is ignored
                "output_above" : 1,
                "output_below" : 0,
                "event_onset"     : "EVT_THREAD_OVERRUN",
                "event_completion": "/EVT_THREAD_OVERRUN"
            },
            "last_filter"      : true
        }
    ]
}
